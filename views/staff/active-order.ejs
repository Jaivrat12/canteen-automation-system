<!DOCTYPE html>
<html lang="en">

    <%- include("../partials/head.ejs") %>

    <body>

        <%- include('../partials/navbar.ejs') %>

        <h1 class="heading">ACTIVE ORDER</h1>

        <div class="order">

            <div class="order-row">
                <div class="order-id">
                    order id: <%= order.id %>
                </div>
                <form action="/orders/<%= order.id %>/update" method="post" class="status-form">
                    <select name="status">
                        <option value="pending"
                            <%= order.status === 'pending' ? 'selected' : '' %>
                        >
                            Pending
                        </option>
                        <option value="accepted"
                            <%= order.status === 'accepted' ? 'selected' : '' %>
                        >
                            Accepted
                        </option>
                        <option value="rejected"
                            <%= order.status === 'rejected' ? 'selected' : '' %>
                        >
                            Rejected
                        </option>
                        <option value="preparing"
                            <%= order.status === 'preparing' ? 'selected' : '' %>
                        >
                            Preparing
                        </option>
                        <option value="completed"
                            <%= order.status === 'completed' ? 'selected' : '' %>
                        >
                            Completed
                        </option>
                        <option value="delivered"
                            <%= order.status === 'delivered' ? 'selected' : '' %>
                        >
                            Delivered
                        </option>
                    </select>
                    <input type="submit" name="update-status" value="update-status">
                </form>
            </div>

            <% for( let i=0; i < order.items.length; i++ ) { %>

                <div class="item">
                    <div>
                        <%= order.items[i].quantity %> x <%= order.items[i].name %>
                    </div>
                    <div>
                        Rs <%= order.items[i].price %>
                    </div>
                </div>

            <% } %>

            <hr>

            <div class="total-price">
                total Rs <%= order.total %>
            </div>

            placed at : <%= order.createdAt %>

            <div class="customer-details">
                <h5>Customer Details</h5>
                <div>id: <%= order.customer.id %></div>
                <div>name: <%= order.customer.name %></div>
                <div>email: <%= order.customer.email %></div>
                <div>phone no: <%= order.customer.phone%></div>
                <div>role: <%= order.customer.role%></div>
                <div>department: <%= order.customer.department%></div>
            </div>

        </div>

    </body>

</html>